<html>
  <head>
    <title>d3-table-report</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <link rel="stylesheet" href="../build/build.css" />
    <style>
      #report {
        width: 100%;
      }
    </style>
  </head>
  <body>
    <h1>d3 table report</h1>
    <table id="report" class="d3-table-report"></table>
    <script src="d3.v3.min.js"></script>
    <script src="../build/build.js"></script>
    <script>
      var report = require('d3-table-report');
      
      var data = [
          { id: 1, count: 20, name: "A", type: "absurd", color: "aqua" },
          { id: 2, count: 30, name: "B", type: "bold", color: "brown" },
          { id: 3, count: 40, name: "C", type: "chatty", color: "chartreuse" },
          { id: 4, count: 29, name: "B", type: "boring", color: "black" },
          { id: 5, count: 20, name: "A", type: "avid", color: "azure" }
      ];


      d3.select('#report').call( 
          report().group(function(d){ return d.name; } )
                  .data(data)
                  .sorter( report.multisorter() )
                  .col( report.col('type').width('25%') )
                  .col( report.col('color').width('45%').render( function(td){
                        td.style('background-color', function(d){ return d.color; })
                      }) 
                  )
                  .col( 'id' )
                  .col( { name: 'count', label: 'total' } )
                  .rollup( function(recs){
                      return { count: recs.length };
                  })
                  .summaryRow( function(th){
                      th.text( function(d){
                          return d.key + ' total: ' + d.values.count;
                      })
                  })
                  .grandRow( function(th){
                      th.text( function(d){
                          return "Grand total: " + d.count;
                      })
                  })
      )

    </script>
  </body>
</html>

