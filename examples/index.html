<html>
  <head>
    <title>d3-table-report</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <link rel="stylesheet" href="../build/build.css" />
    <style>
    </style>
  </head>
  <body>
    <h1>d3 table report</h1>
    <table id="report" class="d3-table-report"></table>
    <script src="d3.v3.min.js"></script>
    <script src="../build/build.js"></script>
    <script>
      var report = require('d3-table-report');
      var data = [
          { id: 1, name: "A", type: "absurd", color: "aqua" },
          { id: 2, name: "B", type: "bold", color: "brown" },
          { id: 3, name: "C", type: "chatty", color: "chartreuse" },
          { id: 4, name: "B", type: "boring", color: "black" },
          { id: 5, name: "A", type: "avid", color: "azure" }
      ];


      d3.select('#report').call( 
          report().group(function(d){ return d.name; } )
                  .data(data)
                  .col( report.col('type').width('25%') )
                  .col( report.col('color').width('45%').render( function(td){
                        td.style('background-color', function(d){ return d.color; })
                      }) 
                  )
                  .col( report.col('id') )
                  .sort(1)
                  .rollup( function(recs){
                      return { count: recs.length };
                  })
                  .summaryRow( function(th){
                      th.text( function(d){
                          return d.key + ' total: ' + d.values.count;
                      })
                  })
                  .grandRow( function(th){
                      th.text( function(d){
                          return "Grand total: " + d.count;
                      })
                  })
      )

    </script>
  </body>
</html>
